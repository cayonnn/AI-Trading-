# ============================================================================
# Gold Trading System - Production Configuration
# ============================================================================
# Version: 1.0
# Last Updated: 2025-12-30
# ============================================================================

# SYSTEM SETTINGS
system:
  name: "Gold Trading System"
  version: "1.0.0"
  environment: "production"  # production, staging, development
  timezone: "UTC"
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# TRADING PARAMETERS
trading:
  symbol: "GOLD"  # MT5 symbol for Gold (was XAUUSD)
  timeframe: "H1"

  # Entry/Exit
  min_confidence: 0.85
  min_mtf_alignment: 0.60

  # Risk Management
  max_position_size: 1.0  # 100% of capital
  default_position_size: 0.5  # 50%
  max_daily_trades: 5
  max_open_positions: 3

  # Stop Loss / Take Profit
  stop_loss:
    min: 0.008  # 0.8%
    max: 0.015  # 1.5%
    default: 0.012  # 1.2%

  risk_reward_ratio:
    min: 2.0  # 1:2
    target: 3.0  # 1:3

  # Trade Duration
  min_hold_time_hours: 24
  max_hold_time_hours: 168  # 1 week

# RISK LIMITS
risk:
  # Daily Limits
  max_daily_loss_pct: 0.05  # 5%
  max_daily_drawdown_pct: 0.08  # 8%

  # Weekly Limits
  max_weekly_loss_pct: 0.10  # 10%

  # Overall Limits
  max_drawdown_pct: 0.15  # 15% - STOP ALL TRADING
  max_correlation: 0.70  # Between positions

  # Consecutive Losses
  max_consecutive_losses: 3  # Pause after 3 losses
  pause_duration_hours: 24  # Wait 24h after max losses

# MULTI-TIMEFRAME ANALYSIS
multi_timeframe:
  enabled: true
  timeframes:
    W1:
      weight: 0.30
      name: "Weekly"
    D1:
      weight: 0.25
      name: "Daily"
    H4:
      weight: 0.20
      name: "4-Hour"
    H1:
      weight: 0.15
      name: "1-Hour"
    M30:
      weight: 0.05
      name: "30-Min"
    M15:
      weight: 0.05
      name: "15-Min"

# REGIME DETECTION
regime:
  enabled: true

  # ADX Thresholds
  trending_adx_min: 25
  strong_trend_adx_min: 35

  # Volatility (ATR)
  high_volatility_pct: 0.015  # 1.5%
  low_volatility_pct: 0.008   # 0.8%

  # Lookback
  adx_period: 14
  atr_period: 14

  # Regime-Specific Adjustments
  adjustments:
    trending:
      position_multiplier: 1.2
      stop_loss_multiplier: 1.0
      confidence_bonus: 0.05

    ranging:
      position_multiplier: 0.8
      stop_loss_multiplier: 1.0
      confidence_bonus: 0.0

# SENTIMENT ANALYSIS
sentiment:
  enabled: true

  sources:
    news:
      enabled: true
      weight: 0.30
      update_frequency_minutes: 60

    social:
      enabled: true
      weight: 0.20
      update_frequency_minutes: 30

    fear_greed:
      enabled: true
      weight: 0.20
      update_frequency_minutes: 360  # 6 hours

    cot:
      enabled: true
      weight: 0.15
      update_frequency_hours: 168  # Weekly

    options:
      enabled: true
      weight: 0.15
      update_frequency_minutes: 60

  # Adjustment Limits
  max_positive_adjustment: 0.15  # +15%
  max_negative_adjustment: -0.15  # -15%

# ALTERNATIVE DATA
alternative_data:
  enabled: true

  sources:
    dxy:
      enabled: true
      weight: 0.25
      inverse_correlation: true

    treasury_yields:
      enabled: true
      weight: 0.15
      inverse_correlation: true

    vix:
      enabled: true
      weight: 0.15
      inverse_correlation: false

    etf_flows:
      enabled: true
      weight: 0.20
      inverse_correlation: false

    central_banks:
      enabled: true
      weight: 0.15
      inverse_correlation: false

    crypto_correlation:
      enabled: true
      weight: 0.10
      inverse_correlation: false

  # Update Frequencies
  update_frequency_minutes: 60

# ENSEMBLE STRATEGIES
ensemble:
  enabled: true
  method: "regime_adaptive"  # simple_voting, weighted_voting, confidence_based, regime_adaptive

  strategies:
    - name: "TrendFollowing"
      enabled: true
      weight: 0.25

    - name: "MeanReversion"
      enabled: true
      weight: 0.20

    - name: "Breakout"
      enabled: true
      weight: 0.20

    - name: "Conservative"
      enabled: true
      weight: 0.20

    - name: "Momentum"
      enabled: true
      weight: 0.15

# MACHINE LEARNING
ml:
  enabled: true  # ENABLED for trained LSTM and XGBoost models

  models:
    lstm_attention:
      enabled: true
      sequence_length: 50
      lstm_units: 128
      attention_units: 64

    transformer:
      enabled: true
      sequence_length: 50
      num_heads: 4
      ff_dim: 128

    dqn:
      enabled: true
      state_dim: 20
      action_dim: 3
      learning_rate: 0.001
      gamma: 0.99

  # Training
  retrain_frequency_days: 30
  min_training_samples: 1000

# DATA SOURCES
data_sources:
  primary:
    provider: "MetaTrader5"  # MetaTrader5, CCXT, YFinance, CSV

    mt5:
      login: ""  # Set in environment variable MT5_LOGIN
      password: ""  # Set in environment variable MT5_PASSWORD
      server: ""  # Set in environment variable MT5_SERVER

    csv:
      path: "backtest_3year_XAUUSD_H1_LONG_only.csv"

  # API Keys (use environment variables in production)
  api_keys:
    news_api: ""  # NEWSAPI_KEY
    twitter_api: ""  # TWITTER_API_KEY
    fred_api: ""  # FRED_API_KEY

# DATABASE
database:
  enabled: true
  type: "sqlite"  # sqlite, postgresql, mysql

  sqlite:
    path: "trading_data.db"

  postgresql:
    host: "localhost"
    port: 5432
    database: "gold_trading"
    user: ""  # Set in environment variable DB_USER
    password: ""  # Set in environment variable DB_PASSWORD

  # Tables
  tables:
    signals: "trading_signals"
    trades: "trades"
    performance: "performance_metrics"
    regime: "regime_history"

# LOGGING
logging:
  level: "INFO"

  # File Logging
  file:
    enabled: true
    path: "logs"
    rotation: "1 day"
    retention: "30 days"
    compression: "zip"

  # Console Logging
  console:
    enabled: true
    colorize: true

  # Remote Logging (optional)
  remote:
    enabled: false
    endpoint: ""
    api_key: ""

# MONITORING & ALERTS
monitoring:
  enabled: true

  # Performance Monitoring
  performance:
    check_interval_minutes: 60

    thresholds:
      win_rate_drop_pct: 0.10  # Alert if 10% below baseline
      drawdown_warning_pct: 0.10
      drawdown_critical_pct: 0.15
      daily_loss_warning_pct: 0.03
      daily_loss_critical_pct: 0.05

  # System Health
  health:
    check_interval_minutes: 5

    thresholds:
      max_latency_ms: 5000  # 5 seconds
      min_uptime_pct: 0.99  # 99%
      max_error_rate_pct: 0.01  # 1%

# ALERTS
alerts:
  enabled: true

  # Email Alerts
  email:
    enabled: false
    smtp_server: ""
    smtp_port: 587
    sender: ""
    recipients: []

    triggers:
      - "trade_executed"
      - "risk_limit_reached"
      - "system_error"
      - "performance_degradation"

  # Telegram Alerts
  telegram:
    enabled: false
    bot_token: ""  # Set in environment variable TELEGRAM_BOT_TOKEN
    chat_id: ""    # Set in environment variable TELEGRAM_CHAT_ID

    triggers:
      - "trade_executed"
      - "risk_limit_reached"
      - "critical_error"

  # Webhook Alerts
  webhook:
    enabled: false
    url: ""

    triggers:
      - "trade_executed"

# BACKTESTING
backtesting:
  enabled: true

  # Data
  start_date: "2022-01-01"
  end_date: "2025-12-31"

  # Validation
  walk_forward:
    enabled: true
    train_pct: 0.70  # 70% training
    test_pct: 0.30   # 30% testing
    max_degradation_pct: 0.10  # 10% max performance drop

  # Output
  save_results: true
  results_path: "backtest_results"

# PRODUCTION SAFEGUARDS
safeguards:
  # Pre-Trade Validation
  pre_trade_checks:
    - "risk_limits"
    - "position_limits"
    - "confidence_threshold"
    - "mtf_alignment"
    - "data_freshness"

  # Circuit Breakers
  circuit_breakers:
    enabled: true

    triggers:
      - name: "max_drawdown"
        threshold: 0.15
        action: "stop_all_trading"

      - name: "consecutive_losses"
        threshold: 3
        action: "pause_trading_24h"

      - name: "daily_loss_limit"
        threshold: 0.05
        action: "stop_trading_today"

      - name: "system_errors"
        threshold: 5
        action: "pause_trading_1h"

  # Data Quality
  data_quality:
    max_missing_data_pct: 0.05  # 5%
    max_data_age_minutes: 60
    require_volume_data: true

# PAPER TRADING
paper_trading:
  enabled: false  # Set to true for paper trading mode
  initial_capital: 10000.0
  track_slippage: true
  simulated_slippage_pct: 0.001  # 0.1%

# PERFORMANCE TRACKING
performance:
  # Metrics to Track
  metrics:
    - "win_rate"
    - "profit_factor"
    - "sharpe_ratio"
    - "max_drawdown"
    - "average_return"
    - "total_trades"
    - "average_duration"

  # Benchmarks
  benchmarks:
    win_rate_target: 0.60
    profit_factor_target: 2.0
    sharpe_ratio_target: 4.0
    max_drawdown_limit: -0.15

  # Reporting
  reports:
    daily_summary: true
    weekly_report: true
    monthly_report: true

    save_to_file: true
    send_email: false

# DEVELOPMENT SETTINGS
development:
  debug_mode: false
  verbose_logging: false
  save_debug_data: false

  # Testing
  test_mode: false
  mock_data: false
  skip_api_calls: false
